!function($){"use strict";var ts=$.tablesorter,output=ts.output={event:"outputTable",noDblClick:600,lastEvent:0,busy:!1,regexQuote:/([\n\t\x09\x0d\x0a]|<[^<]+>)/,regexBR:/(<br([\s\/])?>|\n)/g,regexIMG:/<img[^>]+alt\s*=\s*['"]([^'"]+)['"][^>]*>/i,regexHTML:/<[^<]+>/g,replaceCR:"\r\n",replaceTab:"\t",popupTitle:"Output",popupStyle:"width:100%;height:100%;margin:0;resize:none;",message:"Your device does not support downloading. Please try again in desktop browser.",init:function(c){c.$table.off(output.event).on(output.event,function(e){e.stopPropagation(),!output.busy&&e.timeStamp-output.lastEvent>output.noDblClick&&(output.lastEvent=e.timeStamp,output.busy=!0,output.process(c,c.widgetOptions))})},processRow:function(c,$rows,isHeader,isJSON){var $cell,$cells,cellsLen,rowIndex,row,col,indx,rowspanLen,colspanLen,txt,wo=c.widgetOptions,tmpRow=[],dupe=wo.output_duplicateSpans,addSpanIndex=isHeader&&isJSON&&wo.output_headerRows&&$.isFunction(wo.output_callbackJSON),cellIndex=0,rowsLength=$rows.length;for(rowIndex=0;rowIndex<rowsLength;rowIndex++)for(tmpRow[rowIndex]||(tmpRow[rowIndex]=[]),cellIndex=0,cellsLen=($cells=$rows.eq(rowIndex).children()).length,indx=0;indx<cellsLen;indx++){if(($cell=$cells.eq(indx)).filter("[rowspan]").length)for(rowspanLen=parseInt($cell.attr("rowspan"),10)-1,txt=output.formatData(c,wo,$cell,isHeader),row=1;row<=rowspanLen;row++)tmpRow[rowIndex+row]||(tmpRow[rowIndex+row]=[]),tmpRow[rowIndex+row][cellIndex]=isHeader?txt:dupe?txt:"";if($cell.filter("[colspan]").length)for(colspanLen=parseInt($cell.attr("colspan"),10)-1,txt=output.formatData(c,wo,$cell,isHeader),col=0;col<colspanLen;col++)if($cell.filter("[rowspan]").length)for(rowspanLen=parseInt($cell.attr("rowspan"),10),row=0;row<rowspanLen;row++)tmpRow[rowIndex+row]||(tmpRow[rowIndex+row]=[]),tmpRow[rowIndex+row][cellIndex+col]=addSpanIndex?wo.output_callbackJSON($cell,txt,cellIndex+col)||txt+"("+(cellIndex+col)+")":isHeader?txt:dupe?txt:"";else tmpRow[rowIndex][cellIndex+col]=addSpanIndex?wo.output_callbackJSON($cell,txt,cellIndex+col)||txt+"("+(cellIndex+col)+")":isHeader?txt:dupe?txt:"";for(;void 0!==tmpRow[rowIndex][cellIndex];)cellIndex++;tmpRow[rowIndex][cellIndex]=tmpRow[rowIndex][cellIndex]||output.formatData(c,wo,$cell,isHeader),cellIndex++}return ts.output.removeColumns(c,wo,tmpRow)},removeColumns:function(c,wo,arry){var rowIndex,row,colIndex,data=[],len=arry.length;for(rowIndex=0;rowIndex<len;rowIndex++)for(row=arry[rowIndex],data[rowIndex]=[],colIndex=0;colIndex<c.columns;colIndex++)wo.output_hiddenColumnArray[colIndex]||data[rowIndex].push(row[colIndex]);return data},process:function(c,wo,$rows,dump){var mydata,$this,headers,csvData,len,rowsLen,tmp,hasStringify=window.JSON&&JSON.hasOwnProperty("stringify"),indx=0,tmpData=(wo.output_separator||",").toLowerCase(),outputJSON="json"===tmpData,outputArray="array"===tmpData,separator=outputJSON||outputArray?",":wo.output_separator,saveRows=wo.output_saveRows,$el=c.$table;for(wo.output_regex=new RegExp("("+(/\\/.test(separator)?"\\":"")+separator+")"),wo.output_hiddenColumnArray=[],indx=0;indx<c.columns;indx++)wo.output_hiddenColumnArray[indx]=-1<$.inArray(indx,wo.output_ignoreColumns)||!wo.output_hiddenColumns&&"none"===c.$headerIndexed[indx].css("display")&&!c.$headerIndexed[indx].hasClass("tablesorter-scroller-hidden-column");if($this=$el.children("thead").children("tr").not("."+(ts.css.filterRow||"tablesorter-filter-row")).filter(function(){return wo.output_hiddenColumns||"none"!==$(this).css("display")}),headers=output.processRow(c,$this,!0,outputJSON),$rows||($rows=$el.children("tbody").children("tr").not(c.selectorRemove)),$rows="function"==typeof saveRows?$rows.filter(saveRows):/^f/.test(saveRows)?$rows.not("."+(wo.filter_filteredRow||"filtered")):/^v/.test(saveRows)?$rows.filter(":visible"):/^[.#:\[]/.test(saveRows)?$rows.filter(saveRows):$rows,csvData=output.processRow(c,$rows),wo.output_includeFooter&&(csvData=csvData.concat(output.processRow(c,$el.children("tfoot").children("tr:visible")))),len=headers.length,outputJSON){for(tmpData=[],rowsLen=csvData.length,indx=0;indx<rowsLen;indx++)tmp=headers[1<len&&wo.output_headerRows?indx%len:len-1],tmpData.push(output.row2Hash(tmp,csvData[indx]));mydata=hasStringify?JSON.stringify(tmpData):tmpData}else wo.output_includeHeader?(tmp=[headers[1<len&&wo.output_headerRows?indx%len:len-1]],tmpData=output.row2CSV(wo,wo.output_headerRows?headers:tmp,outputArray).concat(output.row2CSV(wo,csvData,outputArray))):tmpData=output.row2CSV(wo,csvData,outputArray),mydata=outputArray&&hasStringify?JSON.stringify(tmpData):tmpData.join("\n");if(dump)return mydata;if($.isFunction(wo.output_callback)){if(!1===(tmp=wo.output_callback(c,mydata,c.pager&&c.pager.ajaxObject.url||null)))return void(output.busy=!1);"string"==typeof tmp&&(mydata=tmp)}/p/i.test(wo.output_delivery||"")?output.popup(mydata,wo.output_popupStyle,outputJSON||outputArray):output.download(c,wo,mydata),output.busy=!1},row2CSV:function(wo,tmpRow,outputArray){var tmp,rowIndex,csvData=[],rowLen=tmpRow.length;for(rowIndex=0;rowIndex<rowLen;rowIndex++)tmp=(tmpRow[rowIndex]||[]).join("").replace(/\"/g,""),0<(tmpRow[rowIndex]||[]).length&&""!==tmp&&(csvData[csvData.length]=outputArray?tmpRow[rowIndex]:tmpRow[rowIndex].join(wo.output_separator));return csvData},row2Hash:function(keys,values){var indx,json={},len=values.length;for(indx=0;indx<len;indx++)indx<keys.length&&(json[keys[indx]]=values[indx]);return json},formatData:function(c,wo,$el,isHeader){var attr=$el.attr(wo.output_dataAttrib),txt=void 0!==attr?attr:$el.html(),quotes=(wo.output_separator||",").toLowerCase(),separator="json"===quotes||"array"===quotes,result=txt.replace(/\"/g,wo.output_replaceQuote||"“");return txt=(result=wo.output_trimSpaces?result.replace(output.regexBR,""):result.replace(output.regexBR,output.replaceCR).replace(/\t/g,output.replaceTab)).match(output.regexIMG),wo.output_includeHTML||null===txt||(result=txt[1]),result=wo.output_includeHTML&&!isHeader?result:result.replace(output.regexHTML,""),result=wo.output_trimSpaces||isHeader?$.trim(result):result,result=(quotes=!separator&&(wo.output_wrapQuotes||wo.output_regex.test(result)||output.regexQuote.test(result)))?'"'+result+'"':result,"function"==typeof wo.output_formatContent?wo.output_formatContent(c,wo,{isHeader:isHeader,$cell:$el,content:result}):result},popup:function(data,style,wrap){var generator=window.open("",output.popupTitle,style);try{generator.document.write("<html><head><title>"+output.popupTitle+'</title></head><body><textarea wrap="'+(wrap?"on":"off")+'" style="'+output.popupStyle+'">'+data+"\n</textarea></body></html>"),generator.document.close(),generator.focus()}catch(e){return generator.close(),output.popup(data,style,wrap)}return!0},download:function(c,wo,data){if("function"==typeof wo.output_savePlugin)return wo.output_savePlugin(c,wo,data);var e,blob,gotBlob,bom,nav=window.navigator,link=document.createElement("a");if(/(iP)/g.test(nav.userAgent))return alert(output.message),!1;try{gotBlob=!!new Blob}catch(err){gotBlob=!1}return gotBlob?(window.URL=window.URL||window.webkitURL,bom=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(wo.output_encoding)?["\ufeff",data]:[data],blob=new Blob(bom,{type:wo.output_encoding}),nav.msSaveBlob?nav.msSaveBlob(blob,wo.output_saveFileName):(link.href=window.URL.createObjectURL(blob),link.download=wo.output_saveFileName,document.createEvent&&((e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),link.dispatchEvent(e))),!1):(window.open(wo.output_encoding+encodeURIComponent(data)+"?download","_self"),!0)},remove:function(c){c.$table.off(output.event)}};ts.addWidget({id:"output",options:{output_separator:",",output_ignoreColumns:[],output_hiddenColumns:!1,output_includeFooter:!1,output_includeHeader:!0,output_headerRows:!1,output_dataAttrib:"data-name",output_delivery:"popup",output_saveRows:"filtered",output_duplicateSpans:!0,output_replaceQuote:"“;",output_includeHTML:!1,output_trimSpaces:!0,output_wrapQuotes:!1,output_popupStyle:"width=500,height=300",output_saveFileName:"mytable.csv",output_formatContent:null,output_callback:function(config,data){return!0},output_callbackJSON:function($cell,txt,cellIndex){return txt+"("+cellIndex+")"},output_encoding:"data:application/octet-stream;charset=utf8,",output_savePlugin:null},init:function(table,thisWidget,c){output.init(c)},remove:function(table,c){output.remove(c)}})}(jQuery);